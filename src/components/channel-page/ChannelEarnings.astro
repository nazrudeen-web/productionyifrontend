---
const { data } = Astro.props;
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { DollarSign, TrendingUp, Calendar, Banknote } from "lucide-react";
import { toTitleCase } from "@/utils/helper";

const formatUSD = (amount) => {
  if (amount < 1000) {
    return "$" + amount.toString();
  } else if (amount < 1000000) {
    return (
      "$" +
      new Intl.NumberFormat("en", {
        maximumFractionDigits: 0,
      }).format(amount)
    );
  } else if (amount < 1000000000) {
    const millionAmount = amount / 1000000;
    const rounded = Math.round(millionAmount * 10) / 10;
    return (
      "$" +
      (Number.isInteger(rounded) ? rounded.toString() : rounded.toFixed(1)) +
      " million"
    );
  } else {
    const billionAmount = amount / 1000000000;
    const rounded = Math.round(billionAmount * 10) / 10;
    return (
      "$" +
      (Number.isInteger(rounded) ? rounded.toString() : rounded.toFixed(1)) +
      " billion"
    );
  }
};

const earnings = [
  {
    period: "Daily",
    amount: formatUSD(data.dailyIncome),
    icon: Calendar,
    color: "text-amber-600",
    bgColor: "bg-amber-50",
    borderColor: "border-amber-200",
  },
  {
    period: "Monthly",
    amount: formatUSD(data.monthlyIncome),
    icon: TrendingUp,
    color: "text-green-600",
    bgColor: "bg-green-50",
    borderColor: "border-green-200",
  },
  {
    period: "Yearly",
    amount: formatUSD(data.yearlyIncome),
    icon: Banknote,
    color: "text-blue-600",
    bgColor: "bg-blue-50",
    borderColor: "border-blue-200",
  },
];
---

<Card>
  <CardHeader>
    <CardTitle className="flex items-center gap-2 text-lg md:text-xl leading-tight ">
      <DollarSign className="h-5 w-5" />
      Estimated YouTube Earnings for {toTitleCase(data.title)}
    </CardTitle>
    <p class="text-sm md:text-base text-slate-700 leading-relaxed pt-2">
      These are estimated ad revenue earnings for{" "}
      <strong>{toTitleCase(data.title)}</strong>, based on average CPM rates and
      total views. Actual YouTube income may be higher or lower depending on
      audience, niche, and monetization strategies.
    </p>
  </CardHeader>
  <CardContent>
    <div class="grid gap-4 md:grid-cols-3">
      {
        earnings.map((earning, index) => (
          <div
            class={`rounded-xl border-2 p-6 ${earning.bgColor} ${earning.borderColor}`}
          >
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-700">
                  {earning.period} Earnings
                </p>
                <p class={`text-2xl font-bold ${earning.color}`}>
                  {earning.amount}
                </p>
              </div>
              <earning.icon className={`h-8 w-8 ${earning.color}`} />
            </div>
          </div>
        ))
      }
    </div>

    <div class="mt-6 rounded-lg bg-slate-50 p-4">
      <p class="text-sm text-slate-600">
        <strong>Note:</strong> These income estimates are only from YouTube ad revenue.
        They do not include sponsorships, brand deals, merchandise, or other revenue
        sources. For many creators, those extra earnings can be much higher than
        ads alone.
      </p>
    </div>
  </CardContent>
</Card>
